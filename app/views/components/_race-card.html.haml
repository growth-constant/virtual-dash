.race-card
  .ui.centered.grid
    .one.row.column
      .sixteen.wide.column
        - coordinates = Polylines::Decoder.decode_polyline(race.all_data['map']['polyline'])
        - i = coordinates.size / 2
        - lat = coordinates[i][0]
        - lng = coordinates[i][1]
        .map-container{ 
          "data-polyline" => "#{race.all_data['map']['polyline']}",
          "data-lat" => "#{lat}", 
          "data-lng" => "#{lng}", 
          :class => "race-map",
          :id => "map#{race.id}"
        }
    .one.row.column
      .sixteen.wide.column
        = link_to race do
          .details
            %h3.title= race.title
            %p.desc= race.description
    .two.column.row
      .left-button-column.eight.wide.centered.column
        .left-button
          - if !current_user
            .fluid.ui.button.dark-blue.register.tiny
              = link_to 'Sign up', new_user_session_path, class: 'link-to-button'
          - elsif current_user && @registered.empty?
            .fluid.ui.button.dark-blue.register.tiny
              = link_to 'Register', new_race_registration_path(race), class: 'link-to-button'
          - elsif current_user && !@registered.empty?
            .fluid.ui.button.dark-blue.register.tiny
              = link_to 'Status', personal_race_path(race), class: 'link-to-button'
      .right-button-column.eight.wide.centered.column
        .right-button
          .fluid.ui.button.inverted.blue.tiny
            = link_to 'Leaderboard', general_classification_race_path(race), class: 'link-to-inverted-blue-button'