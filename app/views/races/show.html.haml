-# %p#notice= notice

-# %div.title= @race.title

-# %div.center
-#   %div.description= @race.description

-# %div.enddate= "Registration closes on #{@race.enddate.strftime("%d of %B, %Y")}"

-# %div.center
-#   - if !current_user
-#     %a.ui.register_strava_button_link.button{href: '/users/sign_in'} You must register first through Strava
-#   - elsif current_user && @registered.empty?
-#     %a.ui.register_strava_button_link.button{href: "/races/#{@race.id}/registration/new"} Register to race
-#   - elsif current_user && !@registered.empty?
-#     %a.ui.positive.button{href: '#'} Already registered

-# %div.short_text or

-# %div.center
-#   %button.live_results_button{type: 'button'} Live Results


-# .ui.vertically.divided.grid
-#   .six.column.row
-#     .column.center
-#     .column.center
-#       %img.medium.ui.image{:src => "/assets/fake.png", :height => "200px", :width => "200px"}/

-#     .column.center
-#     .column.center

-#     .column.center
-#       %img.medium.ui.image{:src => "/assets/fake.png", :height => "200px", :width => "200px"}/
-#     .column.center

-# %div.map
-#   %div#map{"data-polyline" => "#{@race.all_data['map']['polyline']}",
-#   "data-lat" => "#{@lat}", "data-lng" => "#{@lng}", :style => "height: 600px"}

-# - if current_user.present? && (policy(current_user).admin? || policy(@race).edit?)
-#   = link_to 'Edit', edit_race_path(@race)
-#   \|
-# = link_to 'Back', races_path

.race-details-background
  .container 
    .ui.grid
      .row
        .sixteen.wide.column
          %h1.title= @race.title
      .row
        .sixteen.wide.column
          %p.desc= @race.description
      .row
        .sixteen.wide.column
          - if !current_user
            .ui.button.large.light-blue.race-details-button
              = link_to 'Sign up', new_user_session_path, class: 'link-to-button'
          - elsif current_user && @registered.empty?
            .ui.button.large.light-blue.race-details-button
              %a{href: "/races/#{@race.id}/registration/new", class: 'link-to-button'} Register now
          - elsif current_user && !@registered.empty?
            .ui.disabled.button.large.light-blue.race-details-button Already registered!
          .ui.inverted.button.large.race-details-button
            %a{href: "/races/#{@race.id}", class: 'link-to-inverted-button'} Live results
.enddate-container
  %p.text= "Registation closes on #{@race.enddate.strftime('%B %d, %Y')}"
.race-details-container
  .ui.stackable.grid
    .row
      .eight.wide.column
        %h2{class: 'race-name'}= @race.title
        %p{class: 'price'}= "$#{@race.price.to_i}"
        %p= @race.description
      .eight.wide.column
        .ui.button.large.light-blue.register
          %a{href: "/races/#{@race.id}/registration/new", class: 'link-to-button'} Register now
        .map-container
          %div#map{ "data-polyline" => "#{@race.all_data['map']['polyline']}",
                    "data-lat" => "#{@lat}", 
                    "data-lng" => "#{@lng}", 
                    :class => "race-map"
                  }